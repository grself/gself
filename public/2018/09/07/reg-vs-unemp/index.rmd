---
title: "Registration vs. Unemployment"
author: "George Self"
date: 2018-09-07T08:00:00-07:00
description: "-- Do community college regitrations change with unemployment rates? --"
categories: ["cochise"]
tags: ["cte","employment","registration"]
---


```{r setup, include=FALSE}
# Load some libraries
library(tidyverse)
library(here)
library(plotly)

# Set the rproj home directory
here::here()
```

```{r prepAll, include=FALSE}

Allenrl <- read_csv("enr_hist_all.csv") %>%
  select(
    Year = "Term_Code"
    ,Campus = "Camp_Desc"
    ,Enrollment = "Enrollment"
  ) %>%
  drop_na(Campus) %>%
  mutate(Year = str_sub(Year,1,4))

unemp <- read_csv("unemp.csv") %>%
  rename(
    Campus = "Location"
  )

Alldf <- merge(Allenrl, unemp) %>%
  rename(
    "Unemployment Rate" = "Rate"
  )
```


There is a common belief among community college administrators that as unemployment rates increase the number of registrations for classes at the community college also increase. The idea is that students who are unemployed look to a community college for new training opportunities that may lead to future employment.

I wanted to look at that concept and created the following visualization to explore the idea. I calculated the Cochise College fall registrations for the years 2009-2016 and then found the unemployment rates for three geographical areas using the US Census Bureau's data. For the Douglas Campus I matched the unemployment data for the City of Douglas, for the Sierra Vista Campus I matched the unemployment data for the City of Sierra Vista, and for the online campus, since it covers all of Cochise County, I matched the unemployment data for Cochise County.

Here is a brief animation that shows the results over the past seven years. You can click the Play button to view the entire animation or slide the play head to a year of interest. You can also hover your mouse over any of the data points and read the unemployment rate and registration values for that point.

```{r makeAll, echo=FALSE, message=FALSE}

f <- list(
  family = "Courier New, monospace",
  size = 18,
  color = "#666"
  )

x <- list(
  title = "Unemployment Rate",
  titlefont = f
  )

y <- list(
  title = "All Registrations",
  titlefont = f
  )


p1 <- Alldf %>%
  plot_ly(
    x = ~`Unemployment Rate`
    ,y = ~Enrollment
    ,frame = ~Year
    ,color = ~Campus
    ,type = "scatter"
    ,showlegend = TRUE
    ,marker = list(
      size = 10
      #,color = 'rgba(255,182,193,.9)'
      ,line = list(
        color = 'rgba(50,50,50,.8)'
        ,width = 2
      )
    )
  ) %>%
  layout(
    xaxis = x
    ,yaxis = y
  )

p1


```


This visualization does not seem to support the idea that as unemployment increases the number of class registrations also increases. In fact, the Douglas values show a sharp increase in unemployment between 2010 and 2011, but the number of registrations does not seem to increase. Sierra Vista's unemployment rate seems to increase slightly over this time period but the number of registrations steadily decreases.

That made me wonder if the change in registrations would be seen not in total college registrations but only in Career/Technical Education classes since they would be viewed as more directly leading to employment as opposed to transfer-type classes. So, I re-ran the simulation using only CTE classes.

```{r prepCTE, include=FALSE}

CTEenrl <- read_csv("enr_hist_cte.csv") %>%
  select(
    Year = "Term_Code"
    ,Campus = "Camp_Desc"
    ,Enrollment = "Enrollment"
  ) %>%
  drop_na(Campus) %>%
  mutate(Year = str_sub(Year,1,4))

CTEdf <- merge(CTEenrl, unemp) %>%
  rename(
    "Unemployment Rate" = "Rate"
  )
```


```{r makeCTE, echo=FALSE, message=FALSE}

f <- list(
  family = "Courier New, monospace",
  size = 18,
  color = "#666"
  )

x <- list(
  title = "Unemployment Rate",
  titlefont = f
  )

y <- list(
  title = "CTE Registrations",
  titlefont = f
  )


p2 <- CTEdf %>%
  plot_ly(
    x = ~`Unemployment Rate`
    ,y = ~Enrollment
    ,frame = ~Year
    ,color = ~Campus
    ,type = "scatter"
    ,showlegend = TRUE
    ,marker = list(
      size = 10
      #,color = 'rgba(255,182,193,.9)'
      ,line = list(
        color = 'rgba(50,50,50,.8)'
        ,width = 2
      )
    )
  ) %>%
  layout(
    xaxis = x
    ,yaxis = y
  )

p2


```


Again, there is no overwhelming indication of any sort of relationship between the unemployment rate and the number of registrations for CTE classes. Using the Douglas Campus as a single data point, from 2009 to 2010 there was a significant increase in unemployment and a corresponding increase in the number of registrations. However, the unemployment rate increased dramatically in 2011 and the number of CTE registrations declined back to the 2009 level. For the remainder of the analyzed years, the Douglas CTE registrations never increased much beyond the 2009 level despite a significant increase in unemployment.

While there could be any number of intervening factors not accounted for in this simple analysis, it would seem, at least on the surface, that there is no clear relationship between the unemployment rate in our area and the number of students registering for classes at Cochise College.