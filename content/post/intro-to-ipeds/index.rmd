---
title: "Introduction to Our IPEDS Peers"
author: "George Self"
date: 2018-08-24T08:00:00-07:00
description: "-- A group of colleges that are similar to Cochise --"
categories: ["ipeds"]
tags: ["peers"]
---

```{r setup, include=FALSE}
# Load some libraries
library(tidyverse)
library(here)
library(plotly)
library(DT)
library(widgetframe)

# Set the rproj home directory
here::here()
```

```{r prepDF, include=FALSE}

df <- read_csv("peers.csv") %>%
  select(
    id = "unitid"
    ,name = "institution name"
    ,year = "year"
    ,fips = "HD2016.FIPS state code"
    ,sect = "HD2016.Sector of institution"
    ,deg = "HD2016.Degree-granting status"
    ,tuition = "DRVIC2016.Tuition and fees, 2016-17"
    ,priInOn = "DRVIC2016.Total price for in-state students living on campus 2016-17"
    ,priOutOn = "DRVIC2016.Total price for out-of-state students living on campus 2016-17"
    ,priInOff = "DRVIC2016.Total price for in-state students living off campus (not with family)  2016-17"
    ,priInOffFam = "DRVIC2016.Total price for in-state students living off campus (with family)  2016-17"
    ,size = "HD2016.Institution size category"
    ,regn = "HD2016.Bureau of Economic Analysis (BEA) regions"
    ,enrlTtl = "DRVEF2016.Total  enrollment"
    ,enrlFT = "DRVEF2016.Full-time enrollment"
    ,enrlPT = "DRVEF2016.Part-time enrollment"
    ,fteFall = "DRVEF2016.Full-time equivalent fall enrollment"
    ,frstEnrl = "DRVEF2016.First-time degree/certificate-seeking undergraduate enrollment"
    ,tranEnrl = "DRVEF2016.Transfer-in degree/certificate-seeking undergraduate enrollment"
    ,contEnrl = "DRVEF2016.Continuing degree/certificate-seeking undergraduate enrollment"
    ,nodegEnrl = "DRVEF2016.Nondegree/certificate-seeking undergraduate enrollment"
    ,enrlInd = "DRVEF2016.Percent of total enrollment that are American Indian or Alaska Native"
    ,enrlAsn = "DRVEF2016.Percent of total enrollment that are Asian"
    ,enrlBlk = "DRVEF2016.Percent of total enrollment that are Black or African American"
    ,enrlHsp = "DRVEF2016.Percent of total enrollment that are Hispanic/Latino"
    ,enrlHaw = "DRVEF2016.Percent of total enrollment that are Native Hawaiian or Other Pacific Islander"
    ,enrlWhi = "DRVEF2016.Percent of total enrollment that are White"
    ,enrlTwo = "DRVEF2016.Percent of total enrollment that are two or more races"
    ,enrlUnk = "DRVEF2016.Percent of total enrollment that are Race/ethnicity unknown"
    ,enrlAli = "DRVEF2016.Percent of total enrollment that are Nonresident Alien"
    ,enrlPac = "DRVEF2016.Percent of total enrollment that are Asian/Native Hawaiian/Pacific Islander"
    ,enrlFem = "DRVEF2016.Percent of total enrollment that are women"
    ,sfr = "EF2016D.Student-to-faculty ratio"
    ,retFT = "EF2016D.Full-time retention rate, 2016"
    ,retPT = "EF2016D.Part-time retention rate, 2016"
    ,enrlAdlt = "DRVEF2016.Adult age (25-64) enrollment, all students"
    ,enrl18 = "DRVEF2016.Percent of undergraduate enrollment under 18"
    ,enrl1824 = "DRVEF2016.Percent of undergraduate enrollment 18-24"
    ,enrl2564 = "DRVEF2016.Percent of undergraduate enrollment, 25-64"
    ,enrl65 = "DRVEF2016.Percent of undergraduate enrollment over 65"
    ,frstInNum = "DRVEF2016.Number of first-time undergraduates - in-state"
    ,frstInPct = "DRVEF2016.Percent of first-time undergraduates - in-state"
    ,frstOutNum = "DRVEF2016.Number of first-time undergraduates - out-of-state"
    ,frstOutPct = "DRVEF2016.Percent of first-time undergraduates - out-of-state"
    ,deOnly = "DRVEF2016.Percent of students enrolled exclusively in distance education courses"
    ,deSome = "DRVEF2016.Percent of students enrolled in some but not all distance education courses"
    ,dePct = "DRVEF2016.Percent of students not enrolled in any distance education courses"
    ,asoc = "DRVC2016.Associate's degree"
    ,cert1 = "DRVC2016.Certificates of less than 1-year"
    ,cert12 = "DRVC2016.Certificates of 1 but less than 2-years"
    ,asocNum = "DRVC2016.Number of students receiving an Associate's degree"
    ,cert1Num = "DRVC2016.Number of students receiving a certificate of less than 1-year"
    ,cert12Num = "DRVC2016.Number of students receiving a certificate of 1 but less than 4-years"
    ,gradTtl = "DRVGR2016.Graduation rate, total cohort"
    ,gradMal = "DRVGR2016.Graduation rate, men"
    ,gradFem = "DRVGR2016.Graduation rate, women"
    ,tranTtl = "DRVGR2016.Transfer-out rate, total cohort"
    ,gradPell = "DRVGR2016.Pell Grant recipients - Overall graduation rate within 150 percent of normal time"
    ,gradNoFa = "DRVGR2016.Did not receive Pell Grants or Subsidized Stafford Loans - Overall graduation rate within 150 percent of normal time"
    ,grad100 = "GR200_16.Graduation rate - degree/certificate within 100% of normal time"
    ,faPct = "SFA1516.Percent of full-time first-time undergraduates awarded any financial aid"
    ,faFedPct = "SFA1516.Percent of full-time first-time undergraduates awarded federal, state, local or institutional grant aid"
    ,faFedAmt = "SFA1516.Average amount of federal, state, local or institutional grant aid awarded"
    ,pellPct = "SFA1516.Percent of full-time first-time undergraduates awarded Pell grants"
    ,pellAmt = "SFA1516.Average amount of Pell grant aid awarded to full-time first-time undergraduates"
    ,loanPct = "SFA1516.Percent of full-time first-time undergraduates awarded student loans"
    ,loanAmt = "SFA1516.Average amount of student loans awarded to full-time first-time undergraduates"
    ,revnu = "DRVF2016.Core revenues, total dollars (GASB)"
    ,revnuTuiPct = "DRVF2016.Tuition and fees as a percent of core revenues (GASB)"
    ,revnuStPct = "DRVF2016.State appropriations as percent of core revenues  (GASB)"
    ,revnuLocPct = "DRVF2016.Local appropriations as a percent of core revenues (GASB)"
    ,revnuTuiFte = "DRVF2016.Revenues from tuition and fees per FTE (GASB)"
    ,revnuStFte = "DRVF2016.Revenues from state appropriations per FTE (GASB)"
    ,revnuLocFte = "DRVF2016.Revenues from local appropriations per FTE (GASB)"
    ,exp = "DRVF2016.Core expenses, total dollars (GASB)"
    ,expInstrPct = "DRVF2016.Instruction expenses as a percent of total core expenses (GASB)"
    ,expAcSpPct = "DRVF2016.Academic support expenses as a percent of total core expenses (GASB)"
    ,expStSvPct = "DRVF2016.Student service expenses as a percent of total core expenses (GASB)"
    ,expInSpPct = "DRVF2016.Institutional support expenses as a percent of total core expenses (GASB)"
    ,expInstrFte = "DRVF2016.Instruction expenses per FTE  (GASB)"
    ,expAcSpFte = "DRVF2016.Academic support expenses per FTE (GASB)"
    ,expStSvFte = "DRVF2016.Student service expenses per FTE (GASB)"
    ,expInSpFte = "DRVF2016.Institutional support expenses per FTE (GASB)"
    ,expSalPct = "DRVF2016.Salaries and wages for core expenses as a percent of total core expenses (GASB)"
    ,expSalInstr = "DRVF2016.Salaries and wages for instruction as a percent of total expenses for instruction (GASB)"
    ,expSalAcSp = "DRVF2016.Salaries and wages for academic support as a percent of total expenses for academic support (GASB)"
    ,expSalStSv = "DRVF2016.Salaries and wages for student services as a percent of total expenses for student services (GASB)"
    ,expSalInSp = "DRVF2016.Salaries and wages for institutional support as a percent of total expenses for institutional support (GASB)"
    ,expSalAvr = "DRVHR2016.Average salary equated to 9 months of full-time instructional staff - all ranks"
    ,fteStf = "DRVHR2016.Total FTE staff"
    ,fteInstr = "DRVHR2016.Instructional FTE"
    ,fteLib = "DRVHR2016.Librarians, Curators, and Archivists/Student and Academic Affairs and Other Education Services FTE"
    ,fteStSv = "DRVHR2016.Student and Academic Affairs and Other Education Services FTE"
    ,fteMgmt = "DRVHR2016.Management FTE"
    ,fteBus = "DRVHR2016.Business and Financial Operations FTE"
    ,fteCmptr = "DRVHR2016.Computer, Engineering, and Science FTE"
    ,fteAdmSp = "DRVHR2016.Service, sales, office/admin support, natural resources, construction, maintenance, production, transportation & materials moving FTE"
    ,priFa = "SFA1516.Average net price-students awarded grant or scholarship aid, 2015-16"
    ,phyBks = "DRVAL2016.Physical books as a percent of the total library collection"
    ,phyMed = "DRVAL2016.Physical media as a percent of the total library collection"
    ,phySer = "DRVAL2016.Physical serials as a percent of the total library collection"
    ,dbLib = "DRVAL2016.Databases as a percent of the total library collection"
    ,libSal = "DRVAL2016.Salaries and wages from the library budget as a percent of total library expenditures"
    ,libBkPrch = "DRVAL2016.One-time purchases of books, serial backfiles, and other materials as a percent of total library expenditures"
    ,expLibFte = "DRVAL2016.Total library expenditures per FTE"
    ,addr = "HD2016.Street address or post office box"
    ,city = "HD2016.City location of institution"
    ,state = "HD2016.State abbreviation"
    ,zip = "HD2016.ZIP code"
    ,url = "HD2016.Institution's internet website address"
    ,county = "HD2016.County name"
    ,long = "HD2016.Longitude location of institution"
    ,lat = "HD2016.Latitude location of institution"
  )


```

# IPEDS Peer Comparison

For my first blog post, I decided to take a look at a data extract from the *Integrated Postsecondary Education System* (IPEDS) data made available to Cochise College by the *National Center for Education Statistics* (NCES). All colleges and universities in the United States submit a huge amount of data to the IPEDS database every year so this is a vast repository of data about the entire higher education community. As part of their regular processing, NCES selected peer institution groupings and Cochise College is in a group of 29 colleges. They then created a single-file extract of the most commonly used data elements for each of those colleges. This dataset provides an unparalleled analysis potential as I compare Cochise College to our peers, and that is a fine project for this first blog post. I cannot possibly do a full analysis of the data in this one blog post (there are 29 colleges and 113 attributes for each college), so I will likely return to this dataset frequently over the next few months as I explore different R analysis techniques.

## Peer Institution Listing

Here is an alphabetical list of their names and locations of the peer group, by state.

```{r peerList, echo=FALSE}

names <- select(df
                ,Name = name
                ,City = city
                ,State = state
                ,County = county
                ,Zip = zip
                ) %>%
  mutate(Zip = str_sub(Zip,1,5)) %>% # change the 9-digit zips to 5
  mutate(County = str_replace(County,"County","")) %>%
  arrange(State,Name) # Sort by state/name

f1 <- datatable(names, options = list(pageLength = 7))
frameWidget(f1)

```


## Comparing Tuition

For a simple comparison, I created a graph that shows the annual tuition for a full-time, in-state student at each college. Notice that Cochise College is the second smallest tuition, making us an affordable option for students when compared to our peers.

```{r plottuition, echo=FALSE}

t <- select(df,name,tuition) %>%
  arrange(tuition)

p <- ggplot(data = t, aes(x = name, y = tuition)) +
  geom_bar(stat = "identity", aes(fill = tuition)) +
  scale_x_discrete(limits = t$name[order(-t$tuition)]) +
  scale_fill_continuous(low = 'orange', high = 'brown') +
  theme_bw() +
  labs(title = "Tuition Comparison", x = "College", y = "Tuition") +
  guides(fill=guide_legend(title="Tuition")) +
  coord_flip()

ggplotly(p)


```



## Statistics

I next statistically compared Cochise College to our peers in a number of different ways. (Note: all ranks are calculated such that the smallest value is ranked number one and the largest is number twenty-nine.) Here are the areas where Cochise College was in the top or bottom four colleges in the peer group.

```{r statistics, echo=FALSE, results='asis'}

# In order to guarantee the location of Cochise College in the df
byName <- df[order(df$name),] %>%
  select(
		priInOn
		,nodegEnrl
		,revnuTuiFte
		,expAcSpFte
		,tuition
		,priInOffFam
		,expInstrFte
		,priOutOn
		,enrlTtl
		,dePct
		,cert1
		,cert1Num
		,deSome
		,expSalInstr
		,enrlHsp
		,pellAmt
		,expSalPct
		,asoc
		,asocNum
  )

cmpr <- data.frame(
	"Factor" = c(
		"Enrollment for non-degree students"
		,"Revenue from tuition per FTE"
		,"Acad support expenses per FTE"
		,"Tuition and fees"
		,"Price for in-state off-campus with family"
		,"Instruction Expense per FTE"
		,"Total enrollment"
		,"Percent not enrolled in any distance ed"
		,"Certificates of less than one year"
		,"Number receiving a certificate of less than one year"
		,"Percent enrolled in some distance ed"
		,"Percent of expenses for instruction salary"
		,"Percent Hispanic/Latino enrolled"
		,"Average Pell award"
		,"Percent of expenses for all salaries"
		,"Associate degrees awarded"
		,"Number receiving an Associate degree"
	),
	"Cochise" = c(
		nth(byName$nodegEnrl,7)
		,nth(byName$revnuTuiFte,7)
		,nth(byName$expAcSpFte,7)
		,nth(byName$tuition,7)
		,nth(byName$priInOffFam,7)
		,nth(byName$expInstrFte,7)
		,nth(byName$enrlTtl,7)
		,nth(byName$dePct,7)
		,nth(byName$cert1,7)
		,nth(byName$cert1Num,7)
		,nth(byName$deSome,7)
		,nth(byName$expSalInstr,7)
		,nth(byName$enrlHsp,7)
		,nth(byName$pellAmt,7)
		,nth(byName$expSalPct,7)
		,nth(byName$asoc,7)
		,nth(byName$asocNum,7)
	),
	"Min" = c(
		min(byName$nodegEnrl)
		,min(byName$revnuTuiFte)
		,min(byName$expAcSpFte)
		,min(byName$tuition)
		,min(byName$priInOffFam)
		,min(byName$expInstrFte)
		,min(byName$enrlTtl)
		,min(byName$dePct)
		,min(byName$cert1)
		,min(byName$cert1Num)
		,min(byName$deSome)
		,min(byName$expSalInstr)
		,min(byName$enrlHsp)
		,min(byName$pellAmt)
		,min(byName$expSalPct)
		,min(byName$asoc)
		,min(byName$asocNum)
	),
	"Median" = c(
		median(byName$nodegEnrl)
		,median(byName$revnuTuiFte)
		,median(byName$expAcSpFte)
		,median(byName$tuition)
		,median(byName$priInOffFam)
		,median(byName$expInstrFte)
		,median(byName$enrlTtl)
		,median(byName$dePct)
		,median(byName$cert1)
		,median(byName$cert1Num)
		,median(byName$deSome)
		,median(byName$expSalInstr)
		,median(byName$enrlHsp)
		,median(byName$pellAmt)
		,median(byName$expSalPct)
		,median(byName$asoc)
		,median(byName$asocNum)
	),
	"Max" = c(
		max(byName$nodegEnrl)
		,max(byName$revnuTuiFte)
		,max(byName$expAcSpFte)
		,max(byName$tuition)
		,max(byName$priInOffFam)
		,max(byName$expInstrFte)
		,max(byName$enrlTtl)
		,max(byName$dePct)
		,max(byName$cert1)
		,max(byName$cert1Num)
		,max(byName$deSome)
		,max(byName$expSalInstr)
		,max(byName$enrlHsp)
		,max(byName$pellAmt)
		,max(byName$expSalPct)
		,max(byName$asoc)
		,max(byName$asocNum)
	),
	"Rank" = c(
		rank(byName$nodegEnrl, ties.method = "first")[7]
		,rank(byName$revnuTuiFte, ties.method = "first")[7]
		,rank(byName$expAcSpFte, ties.method = "first")[7]
		,rank(byName$tuition, ties.method = "first")[7]
		,rank(byName$priInOffFam, ties.method = "first")[7]
		,rank(byName$expInstrFte, ties.method = "first")[7]
		,rank(byName$enrlTtl, ties.method = "first")[7]
		,rank(byName$dePct, ties.method = "first")[7]
		,rank(byName$cert1, ties.method = "first")[7]
		,rank(byName$cert1Num, ties.method = "first")[7]
		,rank(byName$deSome, ties.method = "first")[7]
		,rank(byName$expSalInstr, ties.method = "first")[7]
		,rank(byName$enrlHsp, ties.method = "first")[7]
		,rank(byName$pellAmt, ties.method = "first")[7]
		,rank(byName$expSalPct, ties.method = "first")[7]
		,rank(byName$asoc, ties.method = "first")[7]
		,rank(byName$asocNum, ties.method = "first")[7]
	)
)

f3 <- datatable(cmpr,options = list(pageLength = 7))
frameWidget(f3)

```


The first point of interest is that out of more than 100 measured factors Cochise College was at the extreme in only these 17 cases. This seems to indicate that when compared to our peers for most measured items we are ranked somewhere “in the pack” and that would be a comfortable location. 

Many of the items where we are at the low end, like tuition and fees, are a reflection of our board's desire to make Cochise as affordable as possible. Of note, though, is the fact that we do not seem to award many short certificates when compared to our peers. This may be a potential area of growth for the college.

On the other end of the spectrum, we were very high in our use of distance education technology. Also of note is our very high ranking for the number of Associate's degrees and the number of students who earned Associate's degrees. This, again, speaks to the board's desire to ensure that our students are successfully completing their programs.